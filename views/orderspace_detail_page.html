{{/* Orderspace Order Detail Page */}}
{{define "orderspace_order_detail_page"}}
{{template "layout" .}}
{{end}}

{{/* Main content for the Orderspace order detail page */}}
{{define "content"}}
{{template "header" .}}
<main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
  <div class="bg-white shadow rounded-lg p-6">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold text-gray-900">Orderspace Order Details</h1>
      <a href="/orders" class="text-indigo-600 hover:text-indigo-900">← Back to Orders</a>
    </div>

    {{if .Order}}
    <!-- Order Summary -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Order Information</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Order ID:</strong> {{.Order.ID}}</div>
          <div><strong>Order Number:</strong> {{.Order.Number}}</div>
          <div><strong>Status:</strong>
            <span class="status-badge status-{{.Order.Status | statusClass}}">
              {{.Order.Status}}
            </span>
          </div>
          <div><strong>Created:</strong> {{.Order.Created}}</div>
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Customer Information</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Company:</strong> {{.Order.CompanyName}}</div>
          <div><strong>Created By:</strong> {{.Order.CreatedBy}}</div>
          <div><strong>Phone:</strong> {{.Order.Phone}}</div>
          <div><strong>Email:</strong> {{.Order.EmailAddresses.Orders}}</div>
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Order Totals</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Net Total:</strong> {{.Order.Currency}} {{.Order.NetTotal}}</div>
          <div><strong>Gross Total:</strong> {{.Order.Currency}} {{.Order.GrossTotal}}</div>
          <div><strong>Delivery Date:</strong> {{.Order.DeliveryDate}}</div>
          <div><strong>Shipping:</strong> {{.Order.ShippingType}}</div>
        </div>
      </div>
    </div>

    <!-- Addresses -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-lg font-medium text-gray-900 mb-3">Billing Address</h3>
        <div class="text-sm text-gray-600">
          {{.Order.BillingAddress.CompanyName}}<br>
          {{.Order.BillingAddress.ContactName}}<br>
          {{.Order.BillingAddress.Line1}}<br>
          {{if .Order.BillingAddress.Line2}}{{.Order.BillingAddress.Line2}}<br>{{end}}
          {{.Order.BillingAddress.City}}, {{.Order.BillingAddress.State}} {{.Order.BillingAddress.PostalCode}}<br>
          {{.Order.BillingAddress.Country}}
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-lg font-medium text-gray-900 mb-3">Shipping Address</h3>
        <div class="text-sm text-gray-600">
          {{.Order.ShippingAddress.CompanyName}}<br>
          {{.Order.ShippingAddress.ContactName}}<br>
          {{.Order.ShippingAddress.Line1}}<br>
          {{if .Order.ShippingAddress.Line2}}{{.Order.ShippingAddress.Line2}}<br>{{end}}
          {{.Order.ShippingAddress.City}}, {{.Order.ShippingAddress.State}} {{.Order.ShippingAddress.PostalCode}}<br>
          {{.Order.ShippingAddress.Country}}
        </div>
      </div>
    </div>

    <!-- Order Lines -->
    <div class="bg-white">
      <h2 class="text-xl font-bold text-gray-900 mb-4">Order Items</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-300">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SKU</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unit Price</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Subtotal</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {{range .Order.OrderLines}}
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{.SKU}}</td>
              <td class="px-6 py-4 text-sm text-gray-900">
                <div class="font-medium">{{.Name}}</div>
                {{if .Options}}<div class="text-gray-500 text-xs">{{.Options}}</div>{{end}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Quantity}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${{.UnitPrice}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${{.SubTotal}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <div class="text-xs">
                  Invoiced: {{.Invoiced}}<br>
                  Paid: {{.Paid}}<br>
                  Dispatched: {{.Dispatched}}
                </div>
              </td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </div>
    {{else}}
    <div class="text-center py-12">
      <p class="text-red-500 text-lg">No order data found</p>
      <a href="/orders" class="mt-4 inline-block text-indigo-600 hover:text-indigo-900">← Back to Orders</a>
    </div>
    {{end}}
  </div>
</main>
{{end}}
