{{/* WooCommerce Order Detail Page */}}
{{define "woo_order_detail_page"}}
{{template "layout" .}}
{{end}}

{{/* Main content for the WooCommerce order detail page */}}
{{define "content"}}
{{template "header" .}}
<main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
  <div class="bg-white shadow rounded-lg p-6">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold text-gray-900">WooCommerce Order Details</h1>
      <a href="/orders" class="text-indigo-600 hover:text-indigo-900">← Back to Orders</a>
    </div>

    {{if .Order}}
    <!-- Order Summary -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Order Information</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Order ID:</strong> {{.Order.ID}}</div>
          <div><strong>Order Number:</strong> {{.Order.Number}}</div>
          <div><strong>Status:</strong>
            <span class="status-badge status-{{.Order.Status | statusClass}}">
              {{.Order.Status}}
            </span>
          </div>
          <div><strong>Created:</strong> {{.Order.DateCreated}}</div>
          <div><strong>Payment Method:</strong> {{.Order.PaymentMethodTitle}}</div>
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Customer Information</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Customer ID:</strong> {{.Order.CustomerID}}</div>
          <div><strong>Name:</strong> {{.Order.Billing.FirstName}} {{.Order.Billing.LastName}}</div>
          <div><strong>Email:</strong> {{.Order.Billing.Email}}</div>
          <div><strong>Phone:</strong> {{.Order.Billing.Phone}}</div>
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-sm font-medium text-gray-500">Order Totals</h3>
        <div class="mt-2 space-y-1">
          <div><strong>Subtotal:</strong> {{.Order.Currency}} {{.Order.Total}}</div>
          <div><strong>Shipping:</strong> {{.Order.Currency}} {{.Order.ShippingTotal}}</div>
          <div><strong>Tax:</strong> {{.Order.Currency}} {{.Order.TotalTax}}</div>
          <div><strong>Total:</strong> {{.Order.Currency}} {{.Order.Total}}</div>
        </div>
      </div>
    </div>

    <!-- Addresses -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-lg font-medium text-gray-900 mb-3">Billing Address</h3>
        <div class="text-sm text-gray-600">
          {{.Order.Billing.FirstName}} {{.Order.Billing.LastName}}<br>
          {{if .Order.Billing.Company}}{{.Order.Billing.Company}}<br>{{end}}
          {{.Order.Billing.Address1}}<br>
          {{if .Order.Billing.Address2}}{{.Order.Billing.Address2}}<br>{{end}}
          {{.Order.Billing.City}}, {{.Order.Billing.State}} {{.Order.Billing.Postcode}}<br>
          {{.Order.Billing.Country}}
        </div>
      </div>

      <div class="bg-gray-50 p-4 rounded-lg">
        <h3 class="text-lg font-medium text-gray-900 mb-3">Shipping Address</h3>
        <div class="text-sm text-gray-600">
          {{.Order.Shipping.FirstName}} {{.Order.Shipping.LastName}}<br>
          {{if .Order.Shipping.Company}}{{.Order.Shipping.Company}}<br>{{end}}
          {{.Order.Shipping.Address1}}<br>
          {{if .Order.Shipping.Address2}}{{.Order.Shipping.Address2}}<br>{{end}}
          {{.Order.Shipping.City}}, {{.Order.Shipping.State}} {{.Order.Shipping.Postcode}}<br>
          {{.Order.Shipping.Country}}
        </div>
      </div>
    </div>

    <!-- Order Line Items -->
    <div class="bg-white">
      <h2 class="text-xl font-bold text-gray-900 mb-4">Order Items</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-300">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SKU</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {{range .Order.LineItems}}
            <tr>
              <td class="px-6 py-4 text-sm text-gray-900">
                <div class="font-medium">{{.Name}}</div>
                {{if .VariationID}}<div class="text-gray-500 text-xs">Variation ID: {{.VariationID}}</div>{{end}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{.SKU}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Quantity}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Price}}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Total}}</td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Customer Notes -->
    {{if .Order.CustomerNote}}
    <div class="mt-8 bg-yellow-50 p-4 rounded-lg">
      <h3 class="text-lg font-medium text-gray-900 mb-2">Customer Note</h3>
      <p class="text-sm text-gray-700">{{.Order.CustomerNote}}</p>
    </div>
    {{end}}

    {{else}}
    <div class="text-center py-12">
      <p class="text-red-500 text-lg">No order data found</p>
      <a href="/orders" class="mt-4 inline-block text-indigo-600 hover:text-indigo-900">← Back to Orders</a>
    </div>
    {{end}}
  </div>
</main>
{{end}}
